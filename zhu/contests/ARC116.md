# Atcoder Regular Contest 116 比赛记录(vp)

赛时: ABCD

赛后: ABCDE

## 题解

<details>
<summary> 点击展开题解 </summary>

AB比较简单。

C的话就是你注意到非1的（>=2的）最多20个，因此爆搜乘个组合数贡献一下就对了。

D可以按位dp，我们从 $0$ 位到高位考虑。相当于我们有一张表格，第 $i$ 行表示 $2^i$ 位（从 $0$ 开始）的值，第 $j$ 列表示第 $j$ 个数，上面写一个 $0/1$ 表示 $a_j$ 是否含有 $2^i$ 位。

然后我们要满足：
- 每行都有偶数个 $1$ （异或为 $0$）
- 所有 $1$ 带权求和等于 $m$

对着这个dp就行。设 $f(i,j)$ 表示填到 $2^i$ 位，和为 $j$ 的方案数。转移就枚举当前这一位选多少个 $1$，乘个组合数就行了。

复杂度看起来像 $m^2\log m$。进一步观察发现，其实是 $m(m+m/2+m/4+m/8...)$，后面那个其实是 $2m$，因此复杂度是 $O(m^2)$ 的。

E的话就一个dp。

首先二分，然后转换成，对于一个 $d$，能否选择一些关键点，使得它们走 $d$ 步的覆盖区域，并起来，能够覆盖整棵树。

称一个点是“不合法点”当且仅当当前选的关键点覆盖不到这个点。

设 $d_1(i),d_2(i)$ 表示离 $i$ 最远的不合法点距离（没有不合法时设为 $-\infin$），和离 $i$ 最近的关键点距离。

先判：如果 $d_2(i)+d_1(i)\le d$，那么这个关键点就可以覆盖到不合法点，覆盖过去即可。此时就没有不合法点了，令 $d_1(i)=-\infin$。

接下来，如果 $d_1(i)=d$，我们就不得不放一个关键点在这了。此时令 $d_1(i)=-\infin$，因为放关键点之后所有的不合法点就都满足了。

设 $r$ 为根。最后还要看一下 $d_1(r)$，如果不是 $-\infin$，说明根节点上还要放一个关键点。

</details>

## 实况

A略简单。B稍微调了我一会，也很容易。

这场C很容易，看出来爆搜啪的一下就过了。D略想一会，做出来了。

我大为震撼，我以往打ARC都是最后卡在D题，这场我44:16就做到了D题。可能是这场比较简单。

但我D题想到的dp方式是我从来没见过的，也不知道为什么，就能想到这样新颖的dp。也是出到了这个题，让我往这方面想。如果我没打过这一场，可能我很难会想到，对着二进制位做dp。

> 这有点像数位dp，但又有很大的区别，更像是一个选数类型的dp

我E题联想到了树分块的构造。但是那个只能保证每个点到关键点的距离不超过 $d$，而不能保证点数最少。

赛后简单改了一下那个，做到了点数最少，但是TLE了10个点。经过我的分析我发现这玩意的复杂度退化成了 $n^2$。因此我放弃了修改原来的做法，去orz了题解。

## 总结

对于新的问题，要有联想的能力。