# 2021.11.30

今天也被hyh搞了。

11月的最后一天，马上就要12月了qwq

## 做题

还想搞很多题的，卡在ARC130的F卡了好久。一天就做了这个题。

打了几个乱搞，搞不过去，浪费了很久时间。看来我们要想正道。

首先我们发现，这样操作完一遍之后，$a$ 一定是凸的。那先打个凸包。但实际上还可以更小，因此这个东西WA了。

观察一波，我们发现，操作一遍之后，最小值的位置以及值不变。

（这个是题解的考虑）考虑 $A'(i)=A(i)+i$。如果我们操作在 $A'$ 上，操作 $i,k,j=\dfrac{i+k}{2}$ 位置，$A'(j)$ 会变成 $\dfrac{A'(i)+A'(k)}{2}=\dfrac{A(i)+A(k)+i+k}{2}=\dfrac{A(i)+A(k)}{2}+j$ 。

也就是说，我们直接把 $A$ 做修改，然后 $i$ 位置加上 $i$，得到的就是 $A'$ 数组了！

根据上面那个结论可以推得，$A'$ 数组的最小值位置以及值不变。

再想发现，$A(i)+2i,+3i,+4i...-i,-2i,-3i...$ 都满足这个性质。用几何语言描述，斜率为 $...,-3,-2,-1,0,1,2,3,...$ 的直线，切点集的位置都不变。

简单想象一波，这些整数斜率的直线凑一起，形成的凸壳，取 $x$ 坐标为 $1,2,3...n$ 处的 $y$ 坐标，就是我们要求的数组。

因此我们求出凸壳之后，处理出每个点被哪些斜率的直线切过去，然后用这些整数斜率的直线，拼出一个新的凸壳，然后计算一下每个点的 $y$ 坐标即可。

总结：乱搞随机没前途，冷静分析仔细观察想想性质考虑正解。